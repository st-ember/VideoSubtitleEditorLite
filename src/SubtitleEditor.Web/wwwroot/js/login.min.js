define("contexts/loginApiMap",["require","exports"],function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.loginApiMap=void 0;t.loginApiMap={getCaptchaImage:{url:"/Captcha/GetImage",method:"GET"}}});define("elements/pages/LoginPage",["require","exports","contexts/loginApiMap","controllers/PageController","uform-api","uform-page","uform-utility"],function(n,t,i,r,u,f,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o extends f.Page{constructor(){super(...arguments);this.paths=["/","/Login","/Account/Login"];this.loginForm=undefined;this.accountInput=undefined;this.passwordInput=undefined;this.captchaImageContainer=undefined;this.captchaImage=undefined;this.nextImageButton=undefined;this.captchaInput=undefined;this.loginButton=undefined;this.accountInputUpdating=!1;this.spans=[];this.currentAccount=""}async loadAsync(){this.loginButton=document.getElementById("login-button");this.loginForm=document.getElementById("login-form");this.accountInput=document.getElementById("account-input");this.passwordInput=document.getElementById("password-input");this.nextImageButton=document.getElementById("next-image-button");this.captchaImageContainer=this.nextImageButton.parentElement;this.captchaInput=document.getElementById("captcha-input");this.captchaInput&&(this.captchaInput.value="");this.nextImageButton&&(this.nextImageButton.disabled=!0,this.nextImageButton.addEventListener("click",async()=>{this.nextImageButton.disabled=!0;const n=await this._getCaptchaImageAsync();n&&await this._buildCaptchaImageAsync(n);await e.default.wait(1e3);this.nextImageButton.disabled=!1}),e.default.wait(1e3).then(()=>this.nextImageButton.disabled=!1));const n=await this._getCaptchaImageAsync();n&&await this._buildCaptchaImageAsync(n);r.pageController.onIdleTickingFuncs.push(n=>{n>10&&this.reload()})}async _getCaptchaImageAsync(){const n=await u.default.queryAsync(i.loginApiMap.getCaptchaImage,{i:String(Number(new Date))});return n.success?n.data:(alert("取得驗證碼圖片失敗！"),undefined)}async _buildCaptchaImageAsync(n){this.captchaImage&&this.captchaImage.remove();const t=document.createElement("img");t.src=`data:image/png;base64, ${n}`;t.id="captcha-image";this.captchaImageContainer.insertBefore(t,this.captchaImageContainer.firstChild);this.captchaImage=t}}t.default=o});define("elements/pages/RenewPasswordPage",["require","exports","controllers/PageController","uform-page"],function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class u extends r.Page{constructor(){super(...arguments);this.paths=["/RenewPassword","/Account/RenewPassword"]}async loadAsync(){i.pageController.onIdleTickingFuncs.push(n=>{n>10&&(window.location.href="/Login")})}}t.default=u});define("contexts/pageMap",["require","exports","elements/pages/LoginPage","elements/pages/RenewPasswordPage"],function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.pageMap=void 0;t.pageMap={Login:()=>new i.default,RenewPassword:()=>new r.default}});define("controllers/PageController",["require","exports","contexts/pageMap","uform-page"],function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.pageController=void 0;t.pageController=new r.PageController;t.pageController.pageMap=i.pageMap});define("Login",["require","exports","controllers/PageController"],function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i.pageController.loadAsync()});